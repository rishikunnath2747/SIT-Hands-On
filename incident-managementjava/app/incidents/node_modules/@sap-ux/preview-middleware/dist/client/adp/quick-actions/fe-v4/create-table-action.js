"use strict";

sap.ui.define(["sap/ui/dt/OverlayUtil", "../../../cpe/quick-actions/utils", "../../../utils/core", "../../init-dialogs", "./table-quick-action-base"], function (OverlayUtil, _____cpe_quick_actions_utils, _____utils_core, ____init_dialogs, ___table_quick_action_base) {
  "use strict";

  const getRelevantControlFromActivePage = _____cpe_quick_actions_utils["getRelevantControlFromActivePage"];
  const getControlById = _____utils_core["getControlById"];
  const DialogNames = ____init_dialogs["DialogNames"];
  const handler = ____init_dialogs["handler"];
  const TableQuickActionDefinitionBase = ___table_quick_action_base["TableQuickActionDefinitionBase"];
  const CREATE_TABLE_ACTION = 'create_table_action';
  const TOOLBAR_ACTION = 'sap.ui.mdc.ActionToolbar';

  /**
   * Quick Action for creating table action.
   */
  class AddTableActionQuickAction extends TableQuickActionDefinitionBase {
    constructor(context) {
      super(CREATE_TABLE_ACTION, 'QUICK_ACTION_ADD_CUSTOM_TABLE_ACTION', context, true);
    }
    async execute(path) {
      const index = this.tableMap[path];
      const smartTablesToolbarAction = getRelevantControlFromActivePage(this.context.controlIndex, this.context.view, [TOOLBAR_ACTION]);
      for (let i = 0; i < smartTablesToolbarAction.length; i++) {
        if (i === index) {
          const section = getControlById(smartTablesToolbarAction[i].getId());
          const controlOverlay = OverlayUtil.getClosestOverlayFor(section);
          if (controlOverlay) {
            controlOverlay.setSelected(true);
            await handler(controlOverlay, this.context.rta, DialogNames.ADD_FRAGMENT, undefined, {
              aggregation: 'actions',
              title: 'QUICK_ACTION_ADD_CUSTOM_TABLE_ACTION'
            });
          }
        }
      }
      return [];
    }
  }
  var __exports = {
    __esModule: true
  };
  __exports.CREATE_TABLE_ACTION = CREATE_TABLE_ACTION;
  __exports.AddTableActionQuickAction = AddTableActionQuickAction;
  return __exports;
});
//# sourceMappingURL=create-table-action.js.map